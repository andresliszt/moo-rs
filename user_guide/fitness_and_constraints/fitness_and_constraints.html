
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Multi-objective optimization using genetic algorithms in Rust and Python.">
      
      
        <meta name="author" content="AndrÃ©s Sandoval">
      
      
      
        <link rel="prev" href="../../development.html">
      
      
        <link rel="next" href="../operators/operators.html">
      
      
      <link rel="icon" href="../../images/moors-logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Fitness and Constraints - moo-rs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#fitness-and-constraints" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="moo-rs" class="md-header__button md-logo" aria-label="moo-rs" data-md-component="logo">
      
  <img src="../../images/moors-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            moo-rs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Fitness and Constraints
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/andresliszt/moo-rs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    andresliszt/moo-rs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../index.html" class="md-tabs__link">
          
  
  
    
  
  Get Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../development.html" class="md-tabs__link">
        
  
  
    
  
  Development

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="fitness_and_constraints.html" class="md-tabs__link">
          
  
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://docs.rs/moors/latest/moors/" class="md-tabs__link">
        
  
  
    
  
  API docs (moors)

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="moo-rs" class="md-nav__button md-logo" aria-label="moo-rs" data-md-component="logo">
      
  <img src="../../images/moors-logo.png" alt="logo">

    </a>
    moo-rs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/andresliszt/moo-rs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    andresliszt/moo-rs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Get Started
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Get Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/installation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/knapsack.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Knapsack Problem
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/real_valued.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Small Real Valued Problem
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Fitness and Constraints
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="fitness_and_constraints.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Fitness and Constraints
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fitness" class="md-nav__link">
    <span class="md-ellipsis">
      Fitness
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Constraints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constraints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inequality-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Inequality Constraints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#equality-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Equality Constraints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lower-and-upper-bounds" class="md-nav__link">
    <span class="md-ellipsis">
      Lower and Upper Bounds
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operators/operators.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Genetic Operators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../duplicates/duplicates.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Duplicates Cleaner
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Algorithms
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Algorithms
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/introduction/introduction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/custom/custom.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Defined Genetic Operators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/nsga2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NSGA-II
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/rnsga2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RNSGA-II
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/nsga3.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NSGA-III
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/agemoea.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AGE-MOEA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/revea.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    REVEA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/spea2.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SPEA-II
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/ibea.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IBEA
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.rs/moors/latest/moors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API docs (moors)
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fitness" class="md-nav__link">
    <span class="md-ellipsis">
      Fitness
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Constraints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Constraints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inequality-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Inequality Constraints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#equality-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Equality Constraints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lower-and-upper-bounds" class="md-nav__link">
    <span class="md-ellipsis">
      Lower and Upper Bounds
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="fitness-and-constraints">Fitness and Constraints</h1>
<p>In multi-objective optimization, fitness functions assign a numerical score to each candidate solution based on how well it achieves the objectives, while constraint functions measure any violations of problem constraints (e.g., inequalities or equalities).</p>
<p>In <code>moors</code>/<code>pymoors</code>, both fitness and constraint functions are implemented as vectorized operations on ndarrays at the population level. That is, instead of evaluating one individual at a time, they accept a 2D array of shape (<code>num_individuals</code>, <code>num_vars</code>) and so that all individuals in the current population are evaluated simultaneously.</p>
<h2 id="fitness">Fitness</h2>
<p>Fitness is a numerical measure of how well a candidate solution meets the optimization objectives.
It assigns each individual a score that guides selection and reproduction in evolutionary algorithms.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Rust</label><label for="__tabbed_1_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>In <strong>moors</strong>, the way to define objective functions for optimization is through a <a href="https://docs.rs/ndarray/latest/ndarray/">ndarray</a>. Currently, the only dtype supported is <code>f64</code>, we're planning to relax this in the future. It means that when working with a different dtype, such as binary, its values must be trated as <code>f64</code> (in this case as <code>0.0</code> and <code>1.0</code>).</p>
<p>An example is given below</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">ndarray</span><span class="p">::{</span><span class="n">Array2</span><span class="p">,</span><span class="w"> </span><span class="n">Axis</span><span class="p">,</span><span class="w"> </span><span class="n">stack</span><span class="p">};</span>

<span class="sd">/// DTLZ2 for 3 objectives (m = 3) with k = 0 (so num_vars = mâ1 = 2):</span>
<span class="sd">/// f1 = cos(Ï/2 â x0) â cos(Ï/2 â x1)</span>
<span class="sd">/// f2 = cos(Ï/2 â x0) â sin(Ï/2 â x1)</span>
<span class="sd">/// f3 = sin(Ï/2 â x0)</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">fitness_dtlz2_3obj</span><span class="p">(</span><span class="n">genes</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">Array2</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Array2</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">half_pi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="kt">f64</span><span class="p">::</span><span class="n">consts</span><span class="p">::</span><span class="n">PI</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">genes</span><span class="p">.</span><span class="n">column</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="n">mapv</span><span class="p">(</span><span class="o">|</span><span class="n">v</span><span class="o">|</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">half_pi</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">genes</span><span class="p">.</span><span class="n">column</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">mapv</span><span class="p">(</span><span class="o">|</span><span class="n">v</span><span class="o">|</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">half_pi</span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">c0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x0</span><span class="p">.</span><span class="n">mapv</span><span class="p">(</span><span class="kt">f64</span><span class="p">::</span><span class="n">cos</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x0</span><span class="p">.</span><span class="n">mapv</span><span class="p">(</span><span class="kt">f64</span><span class="p">::</span><span class="n">sin</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x1</span><span class="p">.</span><span class="n">mapv</span><span class="p">(</span><span class="kt">f64</span><span class="p">::</span><span class="n">cos</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x1</span><span class="p">.</span><span class="n">mapv</span><span class="p">(</span><span class="kt">f64</span><span class="p">::</span><span class="n">sin</span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c1</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">&amp;</span><span class="n">s1</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">f3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s0</span><span class="p">;</span>

<span class="w">    </span><span class="n">stack</span><span class="p">(</span><span class="n">Axis</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[</span><span class="n">f1</span><span class="p">.</span><span class="n">view</span><span class="p">(),</span><span class="w"> </span><span class="n">f2</span><span class="p">.</span><span class="n">view</span><span class="p">(),</span><span class="w"> </span><span class="n">f3</span><span class="p">.</span><span class="n">view</span><span class="p">()]).</span><span class="n">expect</span><span class="p">(</span><span class="s">&quot;stack failed&quot;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>This funcion has the signature <code>(genes: &amp;Array2&lt;f64&gt;) -&gt; Array2&lt;f64&gt;</code> and is a valid function for any <code>moors</code> multi-objective optimization algorithm, such as <a href="https://docs.rs/moors/0.2.8/moors/algorithms/struct.Nsga2.html" target="_blank" rel="noopener">Nsga2</a>, <a href="https://docs.rs/moors/0.2.8/moors/algorithms/struct.Nsga3.html" target="_blank" rel="noopener">Nsga3</a> , etc. Note that this function is poblational, meaning that the <strong>whole</strong> population is evaluated</p>
<p>A function for a single objective optimization problem has the signature <code>(genes: &amp;Array2&lt;f64&gt;) -&gt; Array1&lt;f64&gt;</code> and is valid for any <code>moors</code> single optimization algorithm. An example is given below</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">ndarray</span><span class="p">::{</span><span class="n">Array1</span><span class="p">,</span><span class="w"> </span><span class="n">Array2</span><span class="p">,</span><span class="w"> </span><span class="n">Axix</span><span class="p">};</span>

<span class="sd">/// Simple minimization of 1 - (x**2 + y**2 + z**2)</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">fitness_sphere</span><span class="p">(</span><span class="n">population</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">Array2</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// For each row [x, y, z], compute 1 - x^2 + y^2 + z^2</span>
<span class="w">    </span><span class="n">population</span><span class="p">.</span><span class="n">map_axis</span><span class="p">(</span><span class="n">Axis</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="o">|</span><span class="n">row</span><span class="o">|</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="n">dot</span><span class="p">(</span><span class="o">&amp;</span><span class="n">row</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>In <strong>pymoors</strong>, the way to define objective functions for optimization is through a <a href="https://numpy.org/doc/">numpy</a>. Currently, the only dtype supported is <code>float</code>, we're planning to relax this in the future. It means that when working with a different dtype, such as binary, its values must be trated as <code>float</code> (in this case as <code>0.0</code> and <code>1.0</code>).</p>
<p>This population-level evaluation is very importantâit allows the algorithm to efficiently process and compare many individuals at once. When writing your fitness function, make sure it is vectorized and returns one row per individual, where each row contains the evaluated objective values.</p>
<p>Below is an example fitness function:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pymoors.typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TwoDArray</span>

<span class="k">def</span><span class="w"> </span><span class="nf">fitness_dtlz2_3obj</span><span class="p">(</span><span class="n">genes</span><span class="p">:</span> <span class="n">TwoDArray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TwoDArray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    DTLZ2 for 3 objectives (m = 3) with k = 0 (so num_vars = mâ1 = 2):</span>
<span class="sd">    f1 = cos(Ï/2 â x0) â cos(Ï/2 â x1)</span>
<span class="sd">    f2 = cos(Ï/2 â x0) â sin(Ï/2 â x1)</span>
<span class="sd">    f3 = sin(Ï/2 â x0)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">half_pi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
    <span class="n">x0</span> <span class="o">=</span> <span class="n">genes</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">half_pi</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="n">genes</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">half_pi</span>

    <span class="n">c0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x0</span><span class="p">)</span>
    <span class="n">s0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x0</span><span class="p">)</span>
    <span class="n">c1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x1</span><span class="p">)</span>

    <span class="n">f1</span> <span class="o">=</span> <span class="n">c0</span> <span class="o">*</span> <span class="n">c1</span>
    <span class="n">f2</span> <span class="o">=</span> <span class="n">c0</span> <span class="o">*</span> <span class="n">s1</span>
    <span class="n">f3</span> <span class="o">=</span> <span class="n">s0</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">([</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">f3</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="constraints">Constraints</h2>
<p>Feasibility is the key concept in constraints. This is very important in optimization, an individual is called <em>feasible</em> if and only if it satisfies all the constraints the problem defines. In <code>moors</code>/<code>pymoors</code> as in many other optimization frameworks, constraints allowed are evaluated as <code>&lt;= 0.0</code>. In genetic algorithms, there are different ways to incorporate feasibility in the search for optimal solutions. In this framework, the guiding philosophy is: <em>feasibility dominates everything</em>, meaning that a feasible individual is always preferred over an infeasible one.</p>
<h3 id="inequality-constraints">Inequality Constraints</h3>
<p>In <code>moors</code>/<code>pymoors</code> as mentioned, any output from a constraint function is evaluated as less than or equal to zero. If this condition is met, the individual is considered feasible. For constraints that are naturally expressed as greater than zero, the user should modify the function by multiplying it by -1, as shown in the following example</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Rust</label><label for="__tabbed_2_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">ndarray</span><span class="p">::{</span><span class="n">Array1</span><span class="p">,</span><span class="w"> </span><span class="n">Array2</span><span class="p">};</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">constraints_sphere_lower_than_zero</span><span class="p">(</span><span class="n">population</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">Array2</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// For each row [x, y, z], compute x^2 + y^2 + z^2 - 1 &lt;= 0</span>
<span class="w">    </span><span class="n">population</span><span class="p">.</span><span class="n">map_axis</span><span class="p">(</span><span class="n">Axis</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="o">|</span><span class="n">row</span><span class="o">|</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="n">dot</span><span class="p">(</span><span class="o">&amp;</span><span class="n">row</span><span class="p">))</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.0</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">constraints_sphere_greather_than_zero</span><span class="p">(</span><span class="n">population</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">Array2</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// For each row [x, y, z], compute x^2 + y^2 + z^2 - 1 =&gt; 0</span>
<span class="w">    </span><span class="mf">1.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">population</span><span class="p">.</span><span class="n">map_axis</span><span class="p">(</span><span class="n">Axis</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="o">|</span><span class="n">row</span><span class="o">|</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="n">dot</span><span class="p">(</span><span class="o">&amp;</span><span class="n">row</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pymoors</span><span class="w"> </span><span class="kn">import</span> <span class="n">Constraints</span>


<span class="k">def</span><span class="w"> </span><span class="nf">constraints_sphere_lower_than_zero</span><span class="p">(</span><span class="n">population</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For each individual (row) in the population, compute x^2 + y^2 + z^2 - 1.</span>
<span class="sd">    Constraint is satisfied when this value is â¤ 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># population shape: (n_individuals, n_dimensions)</span>
    <span class="n">sum_sq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">population</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sum_sq</span> <span class="o">-</span> <span class="mf">1.0</span>

<span class="k">def</span><span class="w"> </span><span class="nf">constraints_sphere_greater_than_zero</span><span class="p">(</span><span class="n">population</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For each individual (row) in the population, compute 1 - (x^2 + y^2 + z^2).</span>
<span class="sd">    Constraint is satisfied when this value is â¥ 0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sum_sq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">population</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">sum_sq</span>


<span class="n">constraints</span> <span class="o">=</span> <span class="n">Constraints</span><span class="p">(</span><span class="n">ineq</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraints_sphere_lower_than_zero</span><span class="p">,</span> <span class="n">constraints_sphere_greater_than_zero</span><span class="p">])</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">constraints as plain numpy function</p>
<p>In <strong>pymoors</strong>, you can pass to the algorithm a callable, in this scenario you must ensure that the return array is always
2D, even if you work with just one constraint.</p>
</div>
</div>
</div>
</div>
<h3 id="equality-constraints">Equality Constraints</h3>
<p>As is many other frameworks, the known epsilon technique must be used to force <span class="arithmatex">\(g(x) = 0\)</span>, select a tolerance <span class="arithmatex">\(\epsilon\)</span> and then transform <span class="arithmatex">\(g\)</span> into an inquality constraint</p>
<div class="arithmatex">\[g_{\text{ineq}}(x) = \bigl|g(x)\bigr| - \varepsilon \;\le\; 0.\]</div>
<p>An example is given below</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Rust</label><label for="__tabbed_3_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">ndarray</span><span class="p">::{</span><span class="n">Array2</span><span class="p">,</span><span class="w"> </span><span class="n">Array1</span><span class="p">,</span><span class="w"> </span><span class="n">Axis</span><span class="p">};</span>

<span class="k">const</span><span class="w"> </span><span class="n">EPSILON</span><span class="p">:</span><span class="w"> </span><span class="kt">f64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1e-6</span><span class="p">;</span>

<span class="sd">/// Returns an Array2 of shape (n, 2) containing two constraints for each row [x, y]:</span>
<span class="sd">/// - Column 0: |x + y - 1| - EPSILON â¤ 0 (equality with Îµ-tolerance)</span>
<span class="sd">/// - Column 1: xÂ² + yÂ² - 1.0 â¤ 0 (unit circle inequality)</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">constraints</span><span class="p">(</span><span class="n">genes</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">Array2</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Array2</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Constraint 1: |x + y - 1| - EPSILON</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">eq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">genes</span><span class="p">.</span><span class="n">map_axis</span><span class="p">(</span><span class="n">Axis</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="o">|</span><span class="n">row</span><span class="o">|</span><span class="w"> </span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.0</span><span class="p">).</span><span class="n">abs</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">EPSILON</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Constraint 2: x^2 + y^2 - 1</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">ineq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">genes</span><span class="p">.</span><span class="n">map_axis</span><span class="p">(</span><span class="n">Axis</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="o">|</span><span class="n">row</span><span class="o">|</span><span class="w"> </span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// Stack into two columns</span>
<span class="w">    </span><span class="n">stack</span><span class="p">(</span><span class="n">Axis</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[</span><span class="n">eq</span><span class="p">.</span><span class="n">view</span><span class="p">(),</span><span class="w"> </span><span class="n">ineq</span><span class="p">.</span><span class="n">view</span><span class="p">()]).</span><span class="n">unwrap</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div>
<p>This example ilustrates 2 constraints where one of them is an equality constraint.</p>
<p>There is a helper macro <code>moors::impl_constraints_fn</code> that will build the expected constraints for us, trying to simplify at most is  possible the boliparte code</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">ndarray</span><span class="p">::{</span><span class="n">Array2</span><span class="p">,</span><span class="w"> </span><span class="n">Array1</span><span class="p">,</span><span class="w"> </span><span class="n">Axis</span><span class="p">};</span>

<span class="k">use</span><span class="w"> </span><span class="n">moors</span><span class="p">::</span><span class="n">impl_constraints_fn</span><span class="p">;</span>

<span class="sd">/// Equality constraint x + y = 1</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">constraints_eq</span><span class="p">(</span><span class="n">genes</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">Array2</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">genes</span><span class="p">.</span><span class="n">map_axis</span><span class="p">(</span><span class="n">Axis</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="o">|</span><span class="n">row</span><span class="o">|</span><span class="w"> </span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.0</span><span class="p">)</span>
<span class="p">}</span>

<span class="sd">/// Inequality constraint: xÂ² + yÂ² - 1 â¤ 0</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">constraints_ineq</span><span class="p">(</span><span class="n">genes</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">Array2</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">genes</span><span class="p">.</span><span class="n">map_axis</span><span class="p">(</span><span class="n">Axis</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="o">|</span><span class="n">row</span><span class="o">|</span><span class="w"> </span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">powi</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.0</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">impl_constraints_fn</span><span class="o">!</span><span class="p">(</span>
<span class="w">    </span><span class="n">MyConstraints</span><span class="p">,</span>
<span class="w">    </span><span class="n">ineq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">constraints_ineq</span><span class="p">],</span>
<span class="w">    </span><span class="n">eq</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">constraints_eq</span><span class="p">],</span>
<span class="p">);</span>
</code></pre></div>
<p>This macro generates a new struct <code>MyConstraints</code> than can be passed to any algorithm, you can pass multiple inequality/equality constraints to the macro <code>impl_constraints_fn(MyConstraints, ineq =[g1, g2, ...], eq = [h1, h2, ..])</code>. This macro will use the epsilon technique internally using a fixed tolerance of <code>1e-6</code>, the last in the near future will be seteable by the user.</p>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pymoors.typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TwoDArray</span>

<span class="n">EPSILON</span> <span class="o">=</span> <span class="mf">1e-6</span>

<span class="k">def</span><span class="w"> </span><span class="nf">constraints</span><span class="p">(</span><span class="n">genes</span><span class="p">:</span> <span class="n">TwoDArray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TwoDArray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute two constraints for each row [x, y] in genes:</span>
<span class="sd">      - Column 0: |x + y - 1| - EPSILON â¤ 0  (equality with Îµ-tolerance)</span>
<span class="sd">      - Column 1: xÂ² + yÂ² - 1.0 â¤ 0         (unit circle inequality)</span>
<span class="sd">    Returns an array of shape (n, 2).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># genes is expected to be shape (n_individuals, 2)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">genes</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">genes</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span>

    <span class="c1"># Constraint 1: |x + y - 1| - EPSILON</span>
    <span class="n">eq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">-</span> <span class="n">EPSILON</span>

    <span class="c1"># Constraint 2: x^2 + y^2 - 1</span>
    <span class="n">ineq</span> <span class="o">=</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mf">1.0</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">eq</span><span class="p">,</span> <span class="n">ineq</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<p>This example ilustrates 2 constraints where one of them is an equality constraint. The <code>pymoors.Constraints</code> class lets us skip having to manually implement the epsilon technique; we can simply do</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pymoors</span><span class="w"> </span><span class="kn">import</span> <span class="n">Constraints</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pymoors.typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TwoDArray</span><span class="p">,</span> <span class="n">OneDArray</span>

<span class="n">EPSILON</span> <span class="o">=</span> <span class="mf">1e-6</span>

<span class="k">def</span><span class="w"> </span><span class="nf">eq_constr</span><span class="p">(</span><span class="n">genes</span><span class="p">:</span> <span class="n">TwoDArray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OneDArray</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">genes</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">genes</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>

<span class="k">def</span><span class="w"> </span><span class="nf">ineq_constr</span><span class="p">(</span><span class="n">genes</span><span class="p">:</span> <span class="n">TwoDArray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">OneDArray</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">genes</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">genes</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span>

<span class="n">constraints</span> <span class="o">=</span> <span class="n">Constraints</span><span class="p">(</span><span class="n">eq</span> <span class="o">=</span> <span class="p">[</span><span class="n">eq_constr</span><span class="p">],</span> <span class="n">ineq</span> <span class="o">=</span> <span class="p">[</span><span class="n">ineq_constr</span><span class="p">])</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="lower-and-upper-bounds">Lower and Upper Bounds</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Rust</label><label for="__tabbed_4_2">Python</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Also this macro has two optional arguments <code>lower_bound</code> and <code>upper_bound</code> that will make each gene bounded by those values.</p>
<div class="highlight"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">ndarray</span><span class="p">::{</span><span class="n">Array2</span><span class="p">,</span><span class="w"> </span><span class="n">Array1</span><span class="p">,</span><span class="w"> </span><span class="n">Axis</span><span class="p">};</span>

<span class="k">use</span><span class="w"> </span><span class="n">moors</span><span class="p">::</span><span class="n">impl_constraints_fn</span><span class="p">;</span>

<span class="sd">/// Equality constraint x + y = 1</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">constraints_eq</span><span class="p">(</span><span class="n">genes</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">Array2</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Array1</span><span class="o">&lt;</span><span class="kt">f64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">genes</span><span class="p">.</span><span class="n">map_axis</span><span class="p">(</span><span class="n">Axis</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="w"> </span><span class="o">|</span><span class="n">row</span><span class="o">|</span><span class="w"> </span><span class="n">row</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">row</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.0</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">impl_constraints_fn</span><span class="o">!</span><span class="p">(</span>
<span class="w">    </span><span class="n">MyBoundedConstraints</span><span class="p">,</span>
<span class="w">    </span><span class="n">eq</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">constraints_eq</span><span class="p">],</span>
<span class="w">    </span><span class="n">lower_bound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span>
<span class="w">    </span><span class="n">upper_bound</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0</span>
<span class="p">);</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title"><code>ConstraintsFn</code> trait</p>
<p>Internally, <code>constraints</code> as an argument to genetic algorithms is actually any type that implements <a href="https://docs.rs/moors/0.2.8/moors/evaluator/trait.ConstraintsFn.html" target="_blank" rel="noopener">ConstraintsFn</a>. The <code>impl_constraints_fn</code> macro creates a struct that implements this trait. The types <code>Fn(&amp;Array2&lt;f64&gt;) -&gt; Array1&lt;f64&gt;</code> and <code>Fn(&amp;Array2&lt;f64&gt;) -&gt; Array2&lt;f64&gt;</code> automatically implement this trait.</p>
</div>
</div>
<div class="tabbed-block">
<p>Also this class has two optional arguments <code>lower_bound</code> and <code>upper_bound</code> that will make each gene bounded by those values.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pymoors</span><span class="w"> </span><span class="kn">import</span> <span class="n">Constraints</span>

<span class="n">EPSILON</span> <span class="o">=</span> <span class="mf">1e-6</span>

<span class="k">def</span><span class="w"> </span><span class="nf">eq_constr</span><span class="p">(</span><span class="n">genes</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">genes</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">genes</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>

<span class="n">constraints</span> <span class="o">=</span> <span class="n">Constraints</span><span class="p">(</span><span class="n">eq</span> <span class="o">=</span> <span class="p">[</span><span class="n">eq_constr</span><span class="p">],</span> <span class="n">lower_bound</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">upper_bound</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">)</span>
</code></pre></div>
</div>
</div>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../development.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Development">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Development
              </div>
            </div>
          </a>
        
        
          
          <a href="../operators/operators.html" class="md-footer__link md-footer__link--next" aria-label="Next: Genetic Operators">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Genetic Operators
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["search.suggest", "search.highlight", "content.tabs.link", "navigation.indexes", "content.tooltips", "navigation.path", "content.code.annotate", "content.code.copy", "content.code.select", "navigation.tabs", "navigation.footer"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../js/custom_mathjax.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>